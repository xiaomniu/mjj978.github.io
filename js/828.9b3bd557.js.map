{"version":3,"file":"js/828.9b3bd557.js","mappings":"+JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,+BAA+B,CAACF,EAAG,IAAI,CAACG,MAAM,CAACC,OAAqB,gBAAdL,KAAKM,QAAwBC,MAAM,CAAC,KAAO,gBAAgBC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,QAAQ,cAAc,IAAI,CAACX,EAAIY,GAAG,QAAQV,EAAG,IAAI,CAACG,MAAM,CAACC,OAAqB,OAAdL,KAAKM,QAAeC,MAAM,CAAC,KAAO,gBAAgBC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,QAAQ,KAAK,IAAI,CAACX,EAAIY,GAAG,QAAQZ,EAAIa,GAAG,KAAKX,EAAG,mBAAmB,CAACO,GAAG,CAAC,QAAUT,EAAIc,WAAWC,MAAM,CAACC,MAAOhB,EAAIiB,UAAWC,SAAS,SAAUC,GAAMnB,EAAIiB,UAAUE,CAAG,EAAEC,WAAW,cAAc,CAAClB,EAAG,WAAW,CAACM,MAAM,CAAC,SAAWR,EAAIqB,SAAS,gBAAgB,SAASZ,GAAG,CAAC,KAAOT,EAAIsB,QAAQP,MAAM,CAACC,MAAOhB,EAAIuB,QAASL,SAAS,SAAUC,GAAMnB,EAAIuB,QAAQJ,CAAG,EAAEC,WAAW,YAAYpB,EAAIwB,GAAIxB,EAAIyB,MAAM,SAASC,GAAM,OAAOxB,EAAG,cAAc,CAACyB,IAAID,EAAKE,GAAGpB,MAAM,CAAC,KAAOkB,IAAO,IAAG,IAAI,IAAI,EACv5B,EACIG,EAAkB,CAAC,WAAY,IAAI7B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACM,MAAM,CAAC,IAAMsB,EAAQ,MAAqB,IAAM,OAChK,G,mBCkBA,GACAC,KAAA,cAEA,aAAAC,GAOA,EAEAC,IAAAA,GACA,OACAR,KAAA,GACAF,SAAA,EACAF,UAAA,EACAJ,WAAA,EACAiB,QAAA,EACA3B,OAAA,cAEA,EACA4B,QAAA,CACA,YAAAb,GAMAc,QAAAC,IAAA,iBAEA,MAAAC,QAAAC,EAAAA,EAAAA,IAAA,CACAL,QAAA,KAAAA,QACAM,SAAA,GACAjC,OAAA,KAAAA,SAEA6B,QAAAC,IAAAC,GAEA,KAAAb,KAAAgB,QAAAH,EAAAL,KAAAA,KAAAS,MAEA,KAAAnB,SAAA,EAEA,KAAAW,UACA,KAAAA,QAAAI,EAAAL,KAAAA,KAAAU,YACA,KAAAtB,UAAA,EAEA,EACAP,SAAAA,GACAsB,QAAAC,IAAA,OACA,KAAApB,WAAA,CACA,EACAN,OAAAA,CAAAJ,GAGA6B,QAAAC,IAAA9B,GACA,KAAA2B,QAAA,EACA,KAAA3B,OAAAA,EACA,KAAAkB,KAAA,GACA,KAAAJ,UAAA,EACA,KAAAE,SAAA,EACA,KAAAD,QAEA,ICnFsP,I,UCQlPsB,GAAY,OACd,EACA7C,EACA8B,GACA,EACA,KACA,WACA,MAIF,EAAee,EAAiB,O,8ICVzB,MAAML,EAAcM,GAAUC,EAAAA,EAAQC,IAAI,mBAAoB,CAACF,OAAOA,IAEhEG,EAAoBpB,GAAMkB,EAAAA,EAAQC,IAAI,kBAAmB,CAACF,OAAO,CAACjB,QAElEqB,EAAarB,GAAMkB,EAAAA,EAAQI,KAAK,iBAAkB,CAACtB,KAAIuB,QAAS,IAEhEC,EAAgBxB,GAAMkB,EAAAA,EAAQI,KAAK,iBAAkB,CAACtB,KAAIuB,QAAS,G","sources":["webpack://hmmj-h5-90/./src/views/Article.vue","webpack://hmmj-h5-90/src/views/Article.vue","webpack://hmmj-h5-90/./src/views/Article.vue?c84a","webpack://hmmj-h5-90/./src/views/Article.vue?25fc","webpack://hmmj-h5-90/./src/api/article.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-page\"},[_c('nav',{staticClass:\"my-nav van-hairline--bottom\"},[_c('a',{class:{active:this.sorter==='weight_desc'},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.hChange('weight_desc')}}},[_vm._v(\"推荐\")]),_c('a',{class:{active:this.sorter===null},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.hChange(null)}}},[_vm._v(\"最新\")]),_vm._m(0)]),_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onload},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('ArticleItem',{key:item.id,attrs:{\"item\":item}})}),1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logo\"},[_c('img',{attrs:{\"src\":require(\"@/assets/logo.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"article-page\">\r\n        <nav class=\"my-nav van-hairline--bottom\">\r\n            <a :class=\"{active:this.sorter==='weight_desc'}\" @click=\"hChange('weight_desc')\" href=\"javascript:;\">推荐</a>\r\n            <a :class=\"{active:this.sorter===null}\" @click=\"hChange(null)\" href=\"javascript:;\">最新</a>\r\n            <!-- <a  @click=\"hChange('weight_desc')\" href=\"javascript:;\">推荐</a>\r\n            <a  @click=\"hChange(null)\" href=\"javascript:;\">最新</a> -->\r\n            <div class=\"logo\"><img src=\"@/assets/logo.png\" alt=\"\"></div>\r\n        </nav>\r\n        <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onload\">\r\n                <ArticleItem :item=\"item\" v-for=\"item in list\" :key=\"item.id\"></ArticleItem>\r\n            </van-list>\r\n        </van-pull-refresh>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticles } from '@/api/article'\r\n// import { Loading } from 'vant'\r\n\r\nexport default{\r\n    name : 'ArticlePage',\r\n    // 因为页面 刚加载时，就是在底部，会自动触发 load 事件，发请求，所以不需要再 created 中再 发请求了\r\n    async created(){\r\n        // const res = await getArticles({\r\n        //     current:this.current,\r\n        //     pageSize:10,\r\n        //     sorter:this.sorter\r\n        // })\r\n        // console.log(res)\r\n        // this.list = res.data.data.rows\r\n    },\r\n    data(){\r\n        return {\r\n            list : [],\r\n            loading : false,\r\n            finished : false,\r\n            isLoading : false,\r\n            current : 1,\r\n            sorter : 'weight_desc'\r\n        }\r\n    },\r\n    methods:{\r\n        async onload(){\r\n            // 1. load 事件在页面华东到底部时 自动触发\r\n            // 2. 触发时会自动将 loading 改为 true，此时我们可以去发请求\r\n            // 3. 请求到数据后，将 loading 手动改为 false\r\n            // 4. 拿到数据后是将数据追加到当前数组后面\r\n            // 5. 自增完后，判断是否大于总页数（服务器返回的），如果大于总页数 需要将  finished 设置为 true\r\n            console.log('到底了，该加载数据了！！！')\r\n\r\n            const res = await getArticles({\r\n                current:this.current,\r\n                pageSize:10,\r\n                sorter:this.sorter\r\n            })\r\n            console.log(res)\r\n            // [1, 2, 3].push([4, 5, 6]) => [1, 2, 3, [4, 5, 6]]\r\n            this.list.push(...res.data.data.rows)\r\n            // 请求完成，将 loading 改为 false\r\n            this.loading = false;\r\n            // 准备获取下一页数据\r\n            this.current++;\r\n            if (this.current > res.data.data.pageTotal) {\r\n                this.finished = true\r\n            }\r\n        },\r\n        onRefresh(){\r\n            console.log('下滑了')\r\n            this.isLoading = false;\r\n        },\r\n        hChange(sorter){\r\n            // 1. 点击切换获取到 sorter\r\n            // 2. 重置所有的数据\r\n            console.log(sorter)\r\n            this.current = 1;\r\n            this.sorter = sorter;\r\n            this.list = []\r\n            this.finished = false;\r\n            this.loading = true;\r\n            this.onload();\r\n            // this.loading = true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.article-page{\r\n    margin-bottom: 50px;\r\n    margin-top: 44px;\r\n    .my-nav{\r\n        height: 44px;\r\n        position: fixed;\r\n        left: 0;\r\n        top:0;\r\n        width: 100%;\r\n        z-index: 999;\r\n        background: #fff;\r\n        display: flex;\r\n        align-items: center;\r\n        > a{\r\n            color: #999;\r\n            font-size: 14px;\r\n            line-height: 44px;\r\n            margin-left: 20px;\r\n            position: relative;\r\n            transition: all 0.3s;\r\n            &::after{\r\n                content: '';\r\n                position: absolute;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                bottom: 0;\r\n                width: 0;\r\n                height: 2px;\r\n                background: #222;\r\n                transition: all 0.3s;\r\n            }\r\n            &.active{\r\n                color: #222;\r\n                &::after{\r\n                    width: 14px;\r\n                };\r\n            }\r\n        }\r\n        .logo{\r\n            flex: 1;\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            > img{\r\n                width: 64px;\r\n                height: 28px;\r\n                display: block;\r\n                margin-right: 10px;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=f4384412&scoped=true\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=f4384412&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4384412\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n// import { getToken } from '@/utils/storage'\r\n\r\n// request.post() 的返回值 是  promise 对象\r\n// export const register = (data) => {\r\n//     return request.post('/user/register', data)\r\n// }\r\n// export const getArticles = params => request.get('/interview/query', {params:params, headers:{Authorization:`Bearer ${getToken()}`}})\r\n//\r\nexport const getArticles = params => request.get('/interview/query', {params:params})\r\n\r\nexport const getArticleDetails = id => request.get('/interview/show', {params:{id}})\r\n\r\nexport const updateLike = id => request.post('/interview/opt', {id, optType: 1})\r\n\r\nexport const updateCollect = id => request.post('/interview/opt', {id, optType: 2})\r\n\r\nexport const getArticlesCollectOrLike = params => request.get('/interview/opt/list', {params:params})\r\n"],"names":["render","_vm","this","_c","_self","staticClass","class","active","sorter","attrs","on","$event","hChange","_v","_m","onRefresh","model","value","isLoading","callback","$$v","expression","finished","onload","loading","_l","list","item","key","id","staticRenderFns","require","name","created","data","current","methods","console","log","res","getArticles","pageSize","push","rows","pageTotal","component","params","request","get","getArticleDetails","updateLike","post","optType","updateCollect"],"sourceRoot":""}